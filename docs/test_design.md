# **テスト設計書**

- charihoアプリの各機能が正しく動作するかをテストします。

## **1. フロントエンド**

### **1.1 単体テスト - 自転車予約機能（予約ボタン動作確認）**

- **テスト対象関数**: `handleReservationClick`

### **テストケース**

| テストケース | 入力値               | 結果                         |
| ------------ | -------------------- | ---------------------------- |
| ケース1      | 有効な自転車IDを入力 | 予約確認ページへ遷移する     |
| ケース2      | 無効な自転車IDを入力 | エラーメッセージが表示される |
| ケース3      | 空の自転車IDを入力   | エラーメッセージが表示される |

### **テスト実行環境**

- テストツール: **Jest**
- テストファイル: `src/__tests__/reservation.test.tsx`
- テスト実行コマンド: `npm test`

---

### **1.2 統合テスト - 自転車検索APIとの統合**

- **テスト対象ファイル**: `src/app/(tabs)/index.tsx`

### **テストケース**

| テストケース | 手順                                         | 結果                         |
| ------------ | -------------------------------------------- | ---------------------------- |
| ケース1      | 位置情報を基に自転車検索フォームを入力し送信 | 自転車検索結果が表示される   |
| ケース2      | 不正な位置情報を入力し送信                   | エラーメッセージが表示される |

### **テスト実行環境**

- テストツール: **Jest**
- テストファイル: `src/__tests__/HomeScreen.test.tsx`
- テスト実行コマンド: `npm test`

---

## **2. バックエンド**

### **2.1 単体テスト - 決済処理（Stripe APIとの統合）**

- **テスト対象関数**: `processPayment`

### **テストケース**

| テストケース         | 結果                                                               |
| -------------------- | ------------------------------------------------------------------ |
| test_payment_success | 決済処理が成功し、Stripe APIから200 OKと正しい決済情報が返る       |
| test_payment_failure | Stripe APIが失敗した場合、500 エラーと適切なエラーメッセージが返る |

### **テスト実行環境**

- テストツール: **pytest**
- テストファイル: `tests/test_payment.py`
- テスト実行コマンド: `pytest tests/`

---

### **2.2 統合テスト - 自転車予約機能の統合**

- **テスト対象ファイル**: `app/main.py`

### **テストケース**

| テストケース                         | 結果                                                             |
| ------------------------------------ | ---------------------------------------------------------------- |
| test_reservation_integration_success | 予約APIが200 OKを返し、予約情報がデータベースに正しく記録される  |
| test_reservation_integration_failure | 予約処理が失敗した場合、500 エラーと適切なエラーメッセージが返る |

### **テスト実行環境**

- テストツール: **TestClient**
- テストファイル: `tests/test_reservation.py`
- テスト実行コマンド: `pytest tests/`

---

## **3. テスト実行環境**

### **フロントエンド**

- テストツール: **Jest**
- テスト実行コマンド: `npm test`

### **バックエンド**

- テストツール: **pytest、TestClient**
- テスト実行コマンド: `pytest tests/`
